<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sistema de Marcenaria - Gestão Completa</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Nosso CSS personalizado -->
  <link rel="stylesheet" href="styles.css">
  <!-- FullCalendar -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>

  <!-- Container de Notificações -->
  <div id="notificationsContainer" class="notifications-container"></div>

  <!-- Navbar Superior Fixa -->
  <nav class="navbar navbar-superior navbar-expand-lg">
    <div class="container-fluid">
      <!-- Logo -->
      <a class="navbar-brand" href="#" onclick="mostrarDashboard(event)">
        <i class="bi bi-tools"></i>
        <span id="nomeSistema">MarcenariaPro</span>
      </a>
      
      <!-- Botão Hamburguer -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarPrincipal">
        <span class="navbar-toggler-icon" style="filter: invert(1);">☰</span>
      </button>
      
      <!-- Menu -->
      <div class="collapse navbar-collapse" id="navbarPrincipal">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link-top active" onclick="mostrarSecao('clientes')">
              <i class="bi bi-people"></i>
              <span>Clientes</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('fornecedores')">
              <i class="bi bi-truck"></i>
              <span>Fornecedores</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('orcamentos')">
              <i class="bi bi-calculator"></i>
              <span>Orçamentos</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('estoque')">
              <i class="bi bi-box-seam"></i>
              <span>Estoque</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('financeiro')">
              <i class="bi bi-cash-coin"></i>
              <span>Financeiro</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('patrimonio')">
              <i class="bi bi-building"></i>
              <span>Patrimônio</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('contratos')">
              <i class="bi bi-file-earmark-text"></i>
              <span>Contratos</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('relatorios')">
              <i class="bi bi-graph-up"></i>
              <span>Relatórios</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('agenda')">
              <i class="bi bi-calendar3"></i>
              <span>Agenda</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-top" onclick="mostrarSecao('configuracoes')">
              <i class="bi bi-gear"></i>
              <span>Configurações</span>
            </a>
          </li>
        </ul>
        
        <!-- Botões de Ação -->
        <div class="navbar-actions">
          <div class="dropdown">
            <button class="btn btn-outline-light btn-sm position-relative" type="button" id="btnNotificacoes" data-bs-toggle="dropdown" aria-expanded="false" title="Notificações">
              <i class="bi bi-bell"></i>
              <span id="notificacoesBadge" class="position-absolute top-0 start-100 translate-middle badge bg-danger rounded-pill" style="display: none;">0</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="btnNotificacoes" style="min-width: 320px; max-height: 400px; overflow-y: auto;">
              <li><h6 class="dropdown-header">Notificações Recentes</h6></li>
              <li id="notificacoesLista">
                <span class="dropdown-item text-muted">Nenhuma notificação</span>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li><button class="dropdown-item text-center text-muted small" onclick="limparNotificacoes()" id="btnLimparNotif" style="display: none;">Limpar tudo</button></li>
            </ul>
          </div>
          <button id="btnRefazer" class="btn btn-outline-light btn-sm ms-2" onclick="refazerUltimaExclusao()" title="Refazer última exclusão" disabled>
            <i class="bi bi-arrow-counterclockwise"></i>
            <span class="d-none d-md-inline"> Refazer</span>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- (Modal de Orçamento simplificado removido — há uma versão completa mais abaixo) -->
  <!-- Dashboard / Início -->
  <div id="dashboard" class="secao" style="display: none;">
    <!-- Header Boas-vindas -->
    <div class="card border-0 shadow-sm mb-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
      <div class="card-body text-white p-5">
        <h1 class="mb-2"><i class="bi bi-tools me-2"></i>MarcenariaPro</h1>
        <p class="fs-5 mb-0">Bem-vindo ao seu sistema de gestão. Escolha uma seção no menu ou veja os destaques abaixo.</p>
      </div>
    </div>

    <!-- Cards de Resumo Executivo -->
    <div class="row mb-4">
      <div class="col-lg-3 col-md-6 mb-3">
        <div class="card border-0 shadow-sm h-100 cursor-pointer" onclick="mostrarSecao('clientes')" style="transition: transform 0.2s;">
          <div class="card-body text-center">
            <div class="mb-3" style="font-size: 2.5rem; color: #667eea;">
              <i class="bi bi-people-fill"></i>
            </div>
            <h6 class="text-muted mb-2">Clientes</h6>
            <div class="fs-3 fw-bold" id="totalClientes">0</div>
            <small class="text-muted d-block mt-2">Clique para gerenciar</small>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-3">
        <div class="card border-0 shadow-sm h-100 cursor-pointer" onclick="mostrarSecao('orcamentos')" style="transition: transform 0.2s;">
          <div class="card-body text-center">
            <div class="mb-3" style="font-size: 2.5rem; color: #f093fb;">
              <i class="bi bi-calculator-fill"></i>
            </div>
            <h6 class="text-muted mb-2">Orçamentos</h6>
            <div class="fs-3 fw-bold" id="totalOrcamentos">0</div>
            <small class="text-muted d-block mt-2">Clique para gerenciar</small>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-3">
        <div class="card border-0 shadow-sm h-100 cursor-pointer" onclick="mostrarSecao('estoque')" style="transition: transform 0.2s;">
          <div class="card-body text-center">
            <div class="mb-3" style="font-size: 2.5rem; color: #fa709a;">
              <i class="bi bi-exclamation-triangle-fill"></i>
            </div>
            <h6 class="text-muted mb-2">Estoque Baixo</h6>
            <div class="fs-3 fw-bold" id="estoqueBaixo">0</div>
            <small class="text-muted d-block mt-2">Itens para reabastecer</small>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-3">
        <div class="card border-0 shadow-sm h-100 cursor-pointer" onclick="mostrarSecao('financeiro')" style="transition: transform 0.2s;">
          <div class="card-body text-center">
            <div class="mb-3" style="font-size: 2.5rem; color: #30b0fe;">
              <i class="bi bi-cash-coin"></i>
            </div>
            <h6 class="text-muted mb-2">Saldo Atual</h6>
            <div class="fs-3 fw-bold" id="saldoResumo" style="color: #28a745;">R$ 0,00</div>
            <small class="text-muted d-block mt-2">Clique para financeiro</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Atalhos Rápidos -->
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-light border-bottom">
        <h6 class="mb-0"><i class="bi bi-lightning-charge me-2"></i>Ações Rápidas</h6>
      </div>
      <div class="card-body">
        <div class="row g-2">
          <div class="col-md-2">
            <button class="btn btn-outline-primary w-100 btn-sm" onclick="adicionarCliente()">
              <i class="bi bi-plus-circle me-1"></i>Novo Cliente
            </button>
          </div>
          <div class="col-md-2">
            <button class="btn btn-outline-success w-100 btn-sm" onclick="adicionarContaReceber()">
              <i class="bi bi-plus-circle me-1"></i>Receber
            </button>
          </div>
          <div class="col-md-2">
            <button class="btn btn-outline-danger w-100 btn-sm" onclick="adicionarContaPagar()">
              <i class="bi bi-plus-circle me-1"></i>Pagar
            </button>
          </div>
          <div class="col-md-2">
            <button class="btn btn-outline-warning w-100 btn-sm" onclick="adicionarOrcamento()">
              <i class="bi bi-plus-circle me-1"></i>Orçamento
            </button>
          </div>
          <div class="col-md-2">
            <button class="btn btn-outline-info w-100 btn-sm" onclick="mostrarSecao('agenda')">
              <i class="bi bi-calendar3 me-1"></i>Agenda
            </button>
          </div>
          <div class="col-md-2">
            <button class="btn btn-outline-secondary w-100 btn-sm" onclick="mostrarSecao('configuracoes')">
              <i class="bi bi-gear me-1"></i>Configurações
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
    <div id="clientes" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-people me-2"></i>Clientes</h5>
          <div>
            <button class="btn btn-primary btn-sm" onclick="adicionarCliente()">
          <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
              <i class="bi bi-plus-circle me-2"></i>Novo Cliente
            </button>
            <button class="btn btn-outline-secondary btn-sm ms-2" onclick="ativarEdicaoTodos('clientes')">
              <i class="bi bi-pencil-square me-2"></i>Editar Tudo
            </button>

          </div>
        </div>
        <div class="card-body">
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-search"></i></span>
                <input type="text" class="form-control" id="buscarCliente" placeholder="Buscar cliente..." onkeyup="filtrarClientes()">
              </div>
            </div>
            <div class="col-md-6 text-end">
              <small class="text-muted">Clique duas vezes em uma célula para editar</small>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
  <tr>
    <th>Nome</th>
    <th>CPF</th>
    <th>E-mail</th>
    <th>Telefone</th>
    <th>Profissão</th>
    <th>Rua</th>
    <th>Número</th>
    <th>Complemento</th>
    <th>Localização</th>
    <th>Cidade</th>
    <th>Estado</th>
    <th class="no-print">Ações</th>
  </tr>
</thead>
              <tbody id="listaClientes">
                <!-- Dados serão carregados aqui -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Fornecedores -->
    <div id="fornecedores" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-truck me-2"></i>Fornecedores</h5>
          <div>
            <button class="btn btn-success btn-sm" onclick="adicionarFornecedor()">
              <i class="bi bi-plus-circle me-2"></i>Novo Fornecedor
            </button>
            <button class="btn btn-outline-secondary btn-sm ms-2" onclick="ativarEdicaoTodos('fornecedores')">
              <i class="bi bi-pencil-square me-2"></i>Editar Tudo
            </button>

          </div>
        </div>
        <div class="card-body">
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-search"></i></span>
                <input type="text" class="form-control" id="buscarFornecedor" placeholder="Buscar fornecedor..." onkeyup="filtrarFornecedores()">
              </div>
            </div>
          </div>

          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th>Nome / Razão Social</th>
                  <th>CNPJ</th>
                  <th>E-mail</th>
                  <th>Telefone</th>
                  <th>Fornecimento</th>
                  <th>Rua</th>
                  <th>Número</th>
                  <th>Complemento</th>
                  <th>Bairro</th>
                  <th>Cidade</th>
                  <th>UF</th>
                  <th>Cadastro</th>
                  <th class="no-print">Ações</th>
                </tr>
              </thead>
              <tbody id="listaFornecedores">
                <!-- Dados serão carregados aqui via JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Agenda / Calendário -->
    <div id="agenda" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-calendar3 me-2"></i>Agenda</h5>
          <div>
            <button class="btn btn-primary btn-sm" onclick="adicionarEventoAgenda()">
              <i class="bi bi-plus-circle me-2"></i>Novo Evento
            </button>

          </div>
        </div>
        <div class="card-body">
          <div class="row mb-3">
            <div class="col-md-4">
              <input type="date" id="filtroAgendaData" class="form-control" onchange="carregarAgenda()">
            </div>
            <div class="col-md-8 text-end">
              <small class="text-muted">Eventos interligados ao financeiro e ao patrimônio.</small>
            </div>
          </div>

          <div id="calendarContainer">
            <div id="calendarAgenda"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Orçamentos -->
    <div id="orcamentos" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-calculator me-2"></i>Orçamentos</h5>
          <div>
            <button class="btn btn-primary btn-sm" onclick="adicionarOrcamento()">
              <i class="bi bi-plus-circle me-2"></i>Novo Orçamento
            </button>
            <button class="btn btn-outline-secondary btn-sm ms-2" onclick="ativarEdicaoTodos('orcamentos')">
              <i class="bi bi-pencil-square me-2"></i>Editar Tudo
            </button>

          </div>
        </div>
        <div class="card-body">
          <div class="row mb-4">
            <div class="col-md-4">
              <select class="form-select" id="filtroStatus" onchange="filtrarOrcamentos()">
                <option value="todos">Todos os Status</option>
                <option value="pendente">Pendentes</option>
                <option value="aprovado">Aprovados</option>
                <option value="recusado">Recusados</option>
              </select>
            </div>
            <div class="col-md-8 text-end">
              <small class="text-muted">Clique duas vezes para editar. Status pode ser alterado.</small>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th class="non-editable-cell">Nº</th>
                  <th>Cliente</th>
                  <th>Descrição</th>
                  <th>Valor</th>
                  <th class="non-editable-cell">Data</th>
                  <th>Status</th>
                  <th class="no-print">Ações</th>
                </tr>
              </thead>
              <tbody id="listaOrcamentos">
                <!-- Dados serão carregados aqui -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Estoque -->
    <div id="estoque" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-box-seam me-2"></i>Estoque</h5>
          <div>
            <button class="btn btn-warning btn-sm" onclick="adicionarItemEstoque()">
              <i class="bi bi-plus-circle me-2"></i>Novo Item
            </button>
            <button class="btn btn-outline-secondary btn-sm ms-2" onclick="ativarEdicaoTodos('estoque')">
              <i class="bi bi-pencil-square me-2"></i>Editar Tudo
            </button>

          </div>
        </div>
        <div class="card-body">
          <div class="alert alert-warning d-flex align-items-center no-print" role="alert">
            <i class="bi bi-exclamation-triangle me-3"></i>
            <div>Itens com estoque baixo são marcados em vermelho. Clique duas vezes para editar valores.</div>
          </div>
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th>Produto</th>
                  <th>Quantidade</th>
                  <th>Mínimo</th>
                  <th>Fornecedor</th>
                  <th>Valor Unitário</th>
                  <th class="non-editable-cell">Status</th>
                  <th class="no-print">Ações</th>
                </tr>
              </thead>
              <tbody id="listaEstoque">
                <!-- Dados serão carregados aqui -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Financeiro -->
    <div id="financeiro" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-cash-coin me-2"></i>Financeiro</h5>
          <div>
            <button class="btn btn-outline-secondary btn-sm" onclick="imprimirRelatorioFinanceiro()">
              <i class="bi bi-printer me-2"></i>Imprimir Relatório
            </button>
            <button class="btn btn-outline-primary btn-sm ms-2" data-edit-toggle="financeiro" onclick="ativarEdicaoTodos('financeiro')">
              <i class="bi bi-pencil-square me-2"></i>Editar Valores
            </button>

          </div>
        </div>
        <div class="card-body" data-save-section="financeiro" data-modal-id="modalNovoReceber">
          <div class="row">
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                  <h6 class="mb-0">Contas a Receber</h6>
                  <button class="btn btn-light btn-sm" onclick="adicionarContaReceber()">
                    <i class="bi bi-plus"></i> Nova
                  </button>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-sm table-hover">
                      <thead>
                        <tr>
                          <th>Descrição</th>
                          <th>Valor</th>
                          <th>Vencimento</th>
                          <th>Cliente</th>
                          <th>Forma</th>
                          <th>Categoria</th>
                          <th>Status</th>
                          <th class="no-print">Ações</th>
                        </tr>
                      </thead>
                      <tbody id="listaReceber">
                        <!-- Dados serão carregados aqui -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                  <h6 class="mb-0">Contas a Pagar</h6>
                  <button class="btn btn-light btn-sm" onclick="adicionarContaPagar()">
                    <i class="bi bi-plus"></i> Nova
                  </button>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-sm table-hover">
                      <thead>
                        <tr>
                          <th>Descrição</th>
                          <th>Valor</th>
                          <th>Vencimento</th>
                          <th>Fornecedor</th>
                          <th>Forma</th>
                          <th>Categoria</th>
                          <th>Status</th>
                          <th class="no-print">Ações</th>
                        </tr>
                      </thead>
                      <tbody id="listaPagar">
                        <!-- Dados serão carregados aqui -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mt-4">
            <div class="col-md-12">
              <div class="alert" id="saldoAlert">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <strong>Saldo Atual:</strong>
                    <span id="saldoAtual" class="ms-2">R$ 0,00</span>
                  </div>
                  <div>
                    <span class="me-3">Receitas: R$ <span id="totalReceitas">0,00</span></span>
                    <span>Despesas: R$ <span id="totalDespesas">0,00</span></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Patrimônio -->
    <div id="patrimonio" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-building me-2"></i>Patrimônio</h5>
          <div>
            <button class="btn btn-info btn-sm text-white" onclick="adicionarPatrimonio()">
              <i class="bi bi-plus-circle me-2"></i>Novo Item
            </button>
            <button class="btn btn-outline-secondary btn-sm ms-2" onclick="ativarEdicaoTodos('patrimonio')">
              <i class="bi bi-pencil-square me-2"></i>Editar Tudo
            </button>

          </div>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
  <tr>
    <th>Código</th>
    <th>Nome</th>
    <th>Categoria</th>
    <th>Data Aquisição</th>
    <th>Fornecedor</th>
    <th>Localização</th>
    <th>Estado</th>
    <th>Vida Útil (anos)</th>
    <th class="no-print">Ações</th>
  </tr>
</thead>
              <tbody id="listaPatrimonio">
                <!-- Dados serão carregados aqui -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Contratos -->
    <div id="contratos" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-file-earmark-text me-2"></i>Contratos</h5>
          <div>
            <button class="btn btn-primary btn-sm" onclick="adicionarContrato()">
              <i class="bi bi-plus-circle me-2"></i>Novo Contrato
            </button>
            <button class="btn btn-outline-secondary btn-sm ms-2" onclick="ativarEdicaoTodos('contratos')">
              <i class="bi bi-pencil-square me-2"></i>Editar Tudo
            </button>

          </div>
        </div>
        <div class="card-body">
          <div id="listaContratos" class="row">
            <!-- Contratos serão carregados aqui -->
          </div>
        </div>
      </div>
    </div>

    <!-- Relatórios -->
    <div id="relatorios" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0"><i class="bi bi-graph-up me-2"></i>Relatórios e Gráficos</h5>
        </div>
        <div class="card-body">
          <!-- Abas de Gráficos -->
          <ul class="nav nav-tabs mb-4" id="abasGraficos" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="tab-financeiro-graph" data-bs-toggle="tab" data-bs-target="#relat-financeiro" type="button">
                <i class="bi bi-cash-coin me-2"></i>Financeiro
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="tab-estoque-graph" data-bs-toggle="tab" data-bs-target="#relat-estoque" type="button">
                <i class="bi bi-box me-2"></i>Estoque
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="tab-clientes-graph" data-bs-toggle="tab" data-bs-target="#relat-clientes" type="button">
                <i class="bi bi-people me-2"></i>Clientes
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="tab-resumo-graph" data-bs-toggle="tab" data-bs-target="#relat-resumo" type="button">
                <i class="bi bi-pie-chart me-2"></i>Resumo Executivo
              </button>
            </li>
          </ul>

          <!-- Conteúdo das Abas -->
          <div class="tab-content" id="conteudoGraficos">
            <!-- Relatório Financeiro -->
            <div class="tab-pane fade show active" id="relat-financeiro" role="tabpanel">
              <div class="row">
                <div class="col-lg-6 mb-4">
                  <div class="card">
                    <div class="card-header bg-light">
                      <h6 class="mb-0">Receitas vs Despesas (Pizza)</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="chartPizzaFinanceiro" style="max-height: 300px;"></canvas>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 mb-4">
                  <div class="card">
                    <div class="card-header bg-light">
                      <h6 class="mb-0">Evolução Mensal (Linha)</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="chartLinhaFinanceiro" style="max-height: 300px;"></canvas>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 mb-4">
                  <div class="card">
                    <div class="card-header bg-light">
                      <h6 class="mb-0">Status das Contas (Barras)</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="chartBarraFinanceiro" style="max-height: 300px;"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Relatório Estoque -->
            <div class="tab-pane fade" id="relat-estoque" role="tabpanel">
              <div class="row">
                <div class="col-lg-6 mb-4">
                  <div class="card">
                    <div class="card-header bg-light">
                      <h6 class="mb-0">Status do Estoque (Doughnut)</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="chartDoughnutEstoque" style="max-height: 300px;"></canvas>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 mb-4">
                  <div class="card">
                    <div class="card-header bg-light">
                      <h6 class="mb-0">Quantidade em Estoque (Barra Horizontal)</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="chartBarraEstoque" style="max-height: 300px;"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Relatório Clientes -->
            <div class="tab-pane fade" id="relat-clientes" role="tabpanel">
              <div class="row">
                <div class="col-lg-6 mb-4">
                  <div class="card">
                    <div class="card-header bg-light">
                      <h6 class="mb-0">Clientes por Cidade (Pizza)</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="chartPizzaClientes" style="max-height: 300px;"></canvas>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 mb-4">
                  <div class="card">
                    <div class="card-header bg-light">
                      <h6 class="mb-0">Total de Clientes por Mês (Barra)</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="chartBarraClientes" style="max-height: 300px;"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Resumo Executivo -->
            <div class="tab-pane fade" id="relat-resumo" role="tabpanel">
              <div class="row mb-4">
                <div class="col-md-3">
                  <div class="card text-center bg-success text-white">
                    <div class="card-body">
                      <h6>Receita Total</h6>
                      <div class="fs-5 fw-bold" id="resumoReceitaTotal">R$ 0,00</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="card text-center bg-danger text-white">
                    <div class="card-body">
                      <h6>Despesa Total</h6>
                      <div class="fs-5 fw-bold" id="resumoDespesaTotal">R$ 0,00</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="card text-center bg-info text-white">
                    <div class="card-body">
                      <h6>Saldo Líquido</h6>
                      <div class="fs-5 fw-bold" id="resumoSaldoTotal">R$ 0,00</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="card text-center bg-warning text-dark">
                    <div class="card-body">
                      <h6>Itens em Estoque</h6>
                      <div class="fs-5 fw-bold" id="resumoEstoqueTotal">0</div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 mb-4">
                  <div class="card">
                    <div class="card-header bg-light">
                      <h6 class="mb-0">Distribuição Geral (Radar)</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="chartRadarResumo" style="max-height: 350px;"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Configurações -->
    <div id="configuracoes" class="secao" style="display: none;">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-gear me-2"></i>Configurações do Sistema</h5>
          <div>
            <button class="btn btn-primary btn-sm" onclick="salvarConfiguracoes()">
              <i class="bi bi-save me-2"></i>Salvar Configurações
            </button>
          </div>
        </div>
        <div class="card-body">
          <form id="formConfiguracoes">
            <div class="row gy-3">
              <div class="col-md-6">
                <label class="form-label fw-bold">Nome do Sistema</label>
                <input type="text" id="cfgNomeSistema" class="form-control" placeholder="MarcenariaPro">
              </div>
              <div class="col-md-6">
                <label class="form-label fw-bold">Tema</label>
                <select id="cfgTema" class="form-select">
                  <option value="auto">Automático</option>
                  <option value="light">Claro</option>
                  <option value="dark">Escuro</option>
                </select>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">Moeda</label>
                <select id="cfgMoeda" class="form-select">
                  <option value="BRL">BRL - R$</option>
                </select>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">Periodicidade padrão (dias) para manutenção</label>
                <input type="number" id="cfgPeriodicidadeDefault" class="form-control" min="0" value="0">
              </div>

              <div class="col-12">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="cfgConfirmDelete">
                  <label class="form-check-label">Exigir confirmação ao excluir itens</label>
                </div>
                <div class="form-check mt-2">
                  <input class="form-check-input" type="checkbox" id="cfgAutoCreateFinancial">
                  <label class="form-check-label">Criar automaticamente entrada financeira a partir da Agenda (receber/pagar)</label>
                </div>
              </div>

              <div class="col-12">
                <label class="form-label fw-bold">Backup e Restauração</label>
                <div class="d-flex gap-2">
                  <button type="button" class="btn btn-outline-secondary" id="btnExportarBackup">Exportar Backup</button>
                  <input type="file" id="inputImportBackup" accept="application/json" style="display:none">
                  <button type="button" class="btn btn-outline-secondary" id="btnImportarBackup">Importar Backup</button>
                  <button type="button" class="btn btn-outline-danger ms-auto" id="btnLimparDados">Limpar todos os dados</button>
                </div>
                <div class="mt-2">
                  <button type="button" class="btn btn-sm btn-outline-danger" id="btnLimparLixeira">Limpar Lixeira</button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Novo Cliente - Atualizado com todos os campos solicitados -->
    <div class="modal fade" id="modalNovoCliente" tabindex="-1" aria-labelledby="modalNovoClienteLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title" id="modalNovoClienteLabel">
              <i class="bi bi-person-plus me-2"></i>Novo Cliente
            </h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="formNovoCliente">
              <div class="row g-3">
                <div class="col-md-12">
                  <label class="form-label fw-bold">Nome <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="novoClienteNome" required autofocus placeholder="Ex: João da Silva">
                </div>
                <div class="col-md-6">
                  <label class="form-label fw-bold">CPF <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="novoClienteCpf" required placeholder="000.000.000-00">
                </div>
                <div class="col-md-6">
                  <label class="form-label fw-bold">Profissão</label>
                  <input type="text" class="form-control" id="novoClienteProfissao" placeholder="Ex: Carpinteiro, Arquiteto...">
                </div>

                <div class="col-md-6">
                  <label class="form-label fw-bold">E-mail <span class="text-danger">*</span></label>
                  <input type="email" class="form-control" id="novoClienteEmail" required placeholder="contato@exemplo.com">
                </div>
                <div class="col-md-6">
                  <label class="form-label fw-bold">Telefone <span class="text-danger">*</span></label>
                  <input type="tel" class="form-control" id="novoClienteTelefone" required placeholder="(00) 00000-0000">
                </div>

                <div class="col-md-6">
                  <label class="form-label fw-bold">Rua</label>
                  <input type="text" class="form-control" id="novoClienteRua" placeholder="Ex: Rua das Flores">
                </div>
                <div class="col-md-3">
                  <label class="form-label fw-bold">Número</label>
                  <input type="text" class="form-control" id="novoClienteNumero" placeholder="123">
                </div>
                <div class="col-md-3">
                  <label class="form-label fw-bold">Complemento</label>
                  <input type="text" class="form-control" id="novoClienteComplemento" placeholder="Apto 4B">
                </div>

                <div class="col-md-4">
                  <label class="form-label fw-bold">Localização</label>
                  <input type="text" class="form-control" id="novoClienteLocalizacao" placeholder="Bairro/Zona">
                </div>
                <div class="col-md-5">
                  <label class="form-label fw-bold">Cidade</label>
                  <input type="text" class="form-control" id="novoClienteCidade" placeholder="Cidade">
                </div>
                <div class="col-md-3">
                  <label class="form-label fw-bold">Estado (UF)</label>
                  <select class="form-select" id="novoClienteEstado">
                    <option value="">Selecione</option>
                    <option value="AC">AC</option>
                    <option value="AL">AL</option>
                    <option value="AP">AP</option>
                    <option value="AM">AM</option>
                    <option value="BA">BA</option>
                    <option value="CE">CE</option>
                    <option value="DF">DF</option>
                    <option value="ES">ES</option>
                    <option value="GO">GO</option>
                    <option value="MA">MA</option>
                    <option value="MT">MT</option>
                    <option value="MS">MS</option>
                    <option value="MG">MG</option>
                    <option value="PA">PA</option>
                    <option value="PB">PB</option>
                    <option value="PR">PR</option>
                    <option value="PE">PE</option>
                    <option value="PI">PI</option>
                    <option value="RJ">RJ</option>
                    <option value="RN">RN</option>
                    <option value="RS">RS</option>
                    <option value="RO">RO</option>
                    <option value="RR">RR</option>
                    <option value="SC" selected>SC</option>
                    <option value="SP">SP</option>
                    <option value="SE">SE</option>
                    <option value="TO">TO</option>
                  </select>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-primary" id="btnSalvarNovoCliente" data-save-section="clientes" data-modal-id="modalNovoCliente">
              <i class="bi bi-check-lg me-2"></i>Salvar Cliente
            </button>
          </div>
        </div>
      </div>
    </div>

<!-- Modal Novo Orçamento (exemplo mais completo) -->
<!-- Modal Novo Orçamento - Versão aprimorada -->
<div class="modal fade" id="modalNovoOrcamento" tabindex="-1" aria-labelledby="modalNovoOrcamentoLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="modalNovoOrcamentoLabel">
          <i class="bi bi-calculator me-2"></i>Novo Orçamento
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <div class="modal-body">
        <form id="formNovoOrcamento">
          <div class="row g-3">

            <!-- Cliente - com busca -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Cliente <span class="text-danger">*</span></label>
              <div class="input-group">
                <input type="text" class="form-control" id="buscaClienteOrcamento" 
                       placeholder="Digite nome ou CPF do cliente..." autocomplete="off">
                <button class="btn btn-outline-secondary" type="button" id="btnLimparBuscaCliente">
                  <i class="bi bi-x-lg"></i>
                </button>
              </div>
              <select class="form-select mt-1" id="novoOrcamentoCliente" required size="5" style="display:none;">
                <!-- opções serão preenchidas dinamicamente -->
              </select>
              <small class="text-muted">Digite nome ou CPF para buscar</small>
            </div>

            <!-- Valor -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Valor Total (R$) <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoOrcamentoValor" required 
                     placeholder="R$ 0,00">
            </div>

            <!-- Condições de Pagamento -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Condições de Pagamento <span class="text-danger">*</span></label>
              <select class="form-select" id="novoOrcamentoCondPagto" required>
                <option value="">Selecione...</option>
                <option value="À vista">À vista</option>
                <option value="30 dias">30 dias</option>
                <option value="30/60/90 dias">30/60/90 dias</option>
                <option value="50% entrada + 50% na entrega">50% entrada + 50% na entrega</option>
                <option value="Parcelado 3x">Parcelado em 3x</option>
                <option value="Parcelado 6x">Parcelado em 6x</option>
                <option value="Parcelado 12x">Parcelado em 12x</option>
                <option value="Outro">Outro (especificar abaixo)</option>
              </select>
            </div>

            <!-- Data de Validade -->
            <div class="col-md-3">
              <label class="form-label fw-bold">Validade do Orçamento</label>
              <input type="date" class="form-control" id="novoOrcamentoValidade">
            </div>

            <!-- Status inicial -->
            <div class="col-md-3">
              <label class="form-label fw-bold">Status Inicial</label>
              <select class="form-select" id="novoOrcamentoStatus">
                <option value="pendente" selected>Pendente</option>
                <option value="aprovado">Aprovado</option>
                <option value="recusado">Recusado</option>
              </select>
            </div>

            <!-- Descrição/Itens -->
            <div class="col-12">
              <label class="form-label fw-bold">Descrição / Itens do Orçamento <span class="text-danger">*</span></label>
              <textarea class="form-control" id="novoOrcamentoDescricao" rows="6" required 
                        placeholder="Descreva detalhadamente: peças, medidas, materiais, acabamentos, prazo de entrega..."></textarea>
            </div>

            <!-- Observações internas (opcional) -->
            <div class="col-12">
              <label class="form-label">Observações internas (uso da marcenaria)</label>
              <textarea class="form-control" id="novoOrcamentoObservacoes" rows="3" 
                        placeholder="Informações que não aparecem para o cliente (ex: custo estimado de matéria-prima, observações de produção...)"></textarea>
            </div>

          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-success" id="btnSalvarNovoOrcamento" data-save-section="orcamentos" data-modal-id="modalNovoOrcamento">
          <i class="bi bi-check-lg me-2"></i>Salvar Orçamento
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Novo Item de Estoque -->
<div class="modal fade" id="modalNovoItemEstoque" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title"><i class="bi bi-box-seam me-2"></i>Novo Item de Estoque</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      
      <div class="modal-body">
        <form id="formNovoItemEstoque">
          <div class="row g-3">
            <div class="col-12">
              <label class="form-label fw-bold">Nome do Produto / Material <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoEstoqueProduto" required autofocus>
            </div>

            <div class="col-md-4">
              <label class="form-label fw-bold">Quantidade Inicial <span class="text-danger">*</span></label>
              <input type="number" class="form-control" id="novoEstoqueQuantidade" min="0" value="0" required>
            </div>

            <div class="col-md-4">
              <label class="form-label fw-bold">Estoque Mínimo <span class="text-danger">*</span></label>
              <input type="number" class="form-control" id="novoEstoqueMinimo" min="1" value="5" required>
            </div>

            <div class="col-md-4">
              <label class="form-label">Valor Unitário (R$)</label>
              <input type="text" class="form-control" id="novoEstoqueValorUnitario" placeholder="R$ 0,00">
            </div>

            <!-- Campo Fornecedor agora é SELECT -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Fornecedor Principal</label>
              <select class="form-select" id="novoEstoqueFornecedor">
                <option value="">Selecione um fornecedor...</option>
                <!-- Preenchido dinamicamente -->
              </select>
            </div>

            <div class="col-md-6">
              <label class="form-label">Fornecedor Alternativo (opcional)</label>
              <input type="text" class="form-control" id="novoEstoqueFornecedorAlt" placeholder="Nome do segundo fornecedor">
            </div>

            <div class="col-12">
              <label class="form-label">Observação / Localização no estoque</label>
              <input type="text" class="form-control" id="novoEstoqueObservacao" placeholder="Ex: Prateleira A-3, Cor Jatobá">
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-warning text-dark" id="btnSalvarNovoEstoque" data-save-section="estoque" data-modal-id="modalNovoItemEstoque">
          <i class="bi bi-check-lg me-2"></i>Adicionar ao Estoque
        </button>
      </div>
    </div>
  </div>
</div>
  </div>

<!-- Modal Novo Fornecedor -->
<!-- Modal Novo Fornecedor - Atualizado com campos obrigatórios -->
<div class="modal fade" id="modalNovoFornecedor" tabindex="-1" aria-labelledby="modalNovoFornecedorLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-info text-white">
        <h5 class="modal-title" id="modalNovoFornecedorLabel">
          <i class="bi bi-truck me-2"></i>Novo Fornecedor
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="formNovoFornecedor">
          <div class="row g-3">
            <!-- Linha 1 - Nome e CNPJ -->
            <div class="col-md-8">
              <label class="form-label fw-bold">Nome / Razão Social <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoFornecedorNome" required autofocus placeholder="Ex: Madeiras ABC Ltda">
            </div>
            <div class="col-md-4">
              <label class="form-label fw-bold">CNPJ <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoFornecedorCnpj" required placeholder="00.000.000/0000-00">
            </div>

            <!-- Linha 2 - Contato -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Telefone <span class="text-danger">*</span></label>
              <input type="tel" class="form-control" id="novoFornecedorTelefone" required placeholder="(00) 00000-0000">
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">E-mail <span class="text-danger">*</span></label>
              <input type="email" class="form-control" id="novoFornecedorEmail" required placeholder="contato@madeirasabc.com.br">
            </div>

            <!-- Linha 3 - Fornecimento -->
            <div class="col-12">
              <label class="form-label fw-bold">Principal fornecimento <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoFornecedorFornecimento" required 
                     placeholder="Ex: MDF, Compensados, Ferragens, Tintas, etc">
            </div>

            <!-- Endereço -->
            <div class="col-md-6">
              <label class="form-label">Rua</label>
              <input type="text" class="form-control" id="novoFornecedorRua" placeholder="Ex: Rua das Indústrias">
            </div>
            <div class="col-md-3">
              <label class="form-label">Número</label>
              <input type="text" class="form-control" id="novoFornecedorNumero" placeholder="456">
            </div>
            <div class="col-md-3">
              <label class="form-label">Complemento</label>
              <input type="text" class="form-control" id="novoFornecedorComplemento" placeholder="Sala 02">
            </div>

            <!-- Localização, Cidade, Estado -->
            <div class="col-md-4">
              <label class="form-label">Localização</label>
              <input type="text" class="form-control" id="novoFornecedorLocalizacao" placeholder="Industrial">
            </div>
            <div class="col-md-5">
              <label class="form-label">Cidade</label>
              <input type="text" class="form-control" id="novoFornecedorCidade" placeholder="Joinville">
            </div>
            <div class="col-md-3">
              <label class="form-label">Estado (UF)</label>
              <select class="form-select" id="novoFornecedorEstado">
                <option value="">Selecione</option>
                <option value="AC">Acre</option>
                <option value="AL">Alagoas</option>
                <option value="AP">Amapá</option>
                <option value="AM">Amazonas</option>
                <option value="BA">Bahia</option>
                <option value="CE">Ceará</option>
                <option value="DF">Distrito Federal</option>
                <option value="ES">Espírito Santo</option>
                <option value="GO">Goiás</option>
                <option value="MA">Maranhão</option>
                <option value="MT">Mato Grosso</option>
                <option value="MS">Mato Grosso do Sul</option>
                <option value="MG">Minas Gerais</option>
                <option value="PA">Pará</option>
                <option value="PB">Paraíba</option>
                <option value="PR">Paraná</option>
                <option value="PE">Pernambuco</option>
                <option value="PI">Piauí</option>
                <option value="RJ">Rio de Janeiro</option>
                <option value="RN">Rio Grande do Norte</option>
                <option value="RS">Rio Grande do Sul</option>
                <option value="RO">Rondônia</option>
                <option value="RR">Roraima</option>
                <option value="SC" selected>Santa Catarina</option>
                <option value="SP">São Paulo</option>
                <option value="SE">Sergipe</option>
                <option value="TO">Tocantins</option>
              </select>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-info text-white" id="btnSalvarNovoFornecedor" data-save-section="fornecedores" data-modal-id="modalNovoFornecedor">
          <i class="bi bi-check-lg me-2"></i>Salvar Fornecedor
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Novo Patrimônio -->
<div class="modal fade" id="modalNovoPatrimonio" tabindex="-1" aria-labelledby="modalNovoPatrimonioLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-info text-white">
        <h5 class="modal-title" id="modalNovoPatrimonioLabel">
          <i class="bi bi-building me-2"></i>Novo Item de Patrimônio
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      
      <div class="modal-body">
        <form id="formNovoPatrimonio">
          <div class="row g-3">

            <!-- Código -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Código <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoPatrimonioCodigo" required 
                     placeholder="Ex: PAT-001, EQ-2025-045" autofocus>
            </div>

            <!-- Nome / Descrição -->
            <div class="col-md-8">
              <label class="form-label fw-bold">Nome do bem <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoPatrimonioNome" required 
                     placeholder="Ex: Serra fita 3HP, Torno CNC 4 eixos">
            </div>

            <!-- Categoria -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Categoria <span class="text-danger">*</span></label>
              <select class="form-select" id="novoPatrimonioCategoria" required>
                <option value="">Selecione a categoria...</option>
                <option value="maquinas">Máquinas pesadas</option>
                <option value="ferramentas">Ferramentas elétricas/manuais</option>
                <option value="moveis">Móveis de escritório/loja</option>
                <option value="informatica">Informática e eletrônicos</option>
                <option value="veiculos">Veículos</option>
                <option value="outros">Outros</option>
              </select>
            </div>

            <!-- Data de aquisição -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Data de aquisição <span class="text-danger">*</span></label>
              <input type="date" class="form-control" id="novoPatrimonioDataAquisicao" required>
            </div>

            <!-- Fornecedor -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Fornecedor</label>
              <select class="form-select" id="novoPatrimonioFornecedor">
                <option value="">Selecione um fornecedor...</option>
                <!-- Será preenchido dinamicamente -->
              </select>
            </div>

            <!-- Localização -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Localização <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoPatrimonioLocalizacao" required 
                     placeholder="Ex: Oficina principal - Setor máquinas pesadas">
            </div>

            <!-- Estado/Condição -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Estado/Condição <span class="text-danger">*</span></label>
              <select class="form-select" id="novoPatrimonioEstado" required>
                <option value="novo">Novo</option>
                <option value="excelente">Excelente</option>
                <option value="bom">Bom</option>
                <option value="regular">Regular</option>
                <option value="ruim">Ruim</option>
                <option value="inservivel">Inservível</option>
              </select>
            </div>

            <!-- Vida útil estimada -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Vida útil estimada (anos) <span class="text-danger">*</span></label>
              <input type="number" class="form-control" id="novoPatrimonioVidaUtil" min="1" required 
                     placeholder="Ex: 10" value="10">
            </div>

          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-info text-white" id="btnSalvarNovoPatrimonio" data-save-section="patrimonio" data-modal-id="modalNovoPatrimonio">
          <i class="bi bi-check-lg me-2"></i>Salvar Patrimônio
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Novo Contrato -->
<div class="modal fade" id="modalNovoContrato" tabindex="-1" aria-labelledby="modalNovoContratoLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title"><i class="bi bi-file-earmark-text me-2"></i>Novo Contrato</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="formNovoContrato">
          <div class="row g-3">
            <div class="col-12">
              <label class="form-label fw-bold">Cliente <span class="text-danger">*</span></label>
              <select class="form-select" id="novoContratoCliente" required>
                <option value="">Selecione um cliente...</option>
              </select>
            </div>
            <div class="col-12">
              <label class="form-label fw-bold">Descrição <span class="text-danger">*</span></label>
              <textarea class="form-control" id="novoContratoDescricao" rows="4" required placeholder="Descreva os termos do contrato..."></textarea>
            </div>
            <div class="col-md-6">
              <label class="form-label">Status</label>
              <select class="form-select" id="novoContratoStatus">
                <option value="ativo">Ativo</option>
                <option value="inativo">Inativo</option>
              </select>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" id="btnSalvarNovoContrato" data-save-section="contratos" data-modal-id="modalNovoContrato">
          <i class="bi bi-check-lg me-2"></i>Criar Contrato
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Novo Evento Agenda -->
<div class="modal fade" id="modalNovoEventoAgenda" tabindex="-1" aria-labelledby="modalNovoEventoAgendaLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="modalNovoEventoAgendaLabel"><i class="bi bi-calendar3 me-2"></i>Novo Evento</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="formNovoEventoAgenda">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Data</label>
              <input type="date" id="eventoData" class="form-control" required>
              <input type="hidden" id="eventoId">
            </div>
            <div class="col-md-6">
              <label class="form-label">Tipo</label>
              <select id="eventoTipo" class="form-select">
                <option value="servico">Montagem / Serviço</option>
                <option value="manutencao">Manutenção Patrimônio</option>
                <option value="receber">Entrada (Receber)</option>
                <option value="pagar">Saída (Pagar)</option>
              </select>
            </div>
            <div class="col-12">
              <label class="form-label">Descrição</label>
              <input type="text" id="eventoDescricao" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label">Valor (opcional)</label>
              <input type="text" id="eventoValor" class="form-control moeda">
            </div>
            <div class="col-md-6">
              <label class="form-label">Vincular a</label>
              <select id="eventoVinculo" class="form-select">
                <option value="">Nenhum</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">Periodicidade (dias)</label>
              <input type="number" id="eventoPeriodicidade" class="form-control" placeholder="0 = não periódico">
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" id="btnSalvarEventoAgenda">Salvar Evento</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Nova Conta a Receber -->
<div class="modal fade" id="modalNovoReceber" tabindex="-1" aria-labelledby="modalNovoReceberLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="modalNovoReceberLabel"><i class="bi bi-arrow-down-circle me-2"></i>Nova Entrada Financeira (Lucro)</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="formNovoReceber">
          <div class="row g-3">
            <!-- Descrição -->
            <div class="col-12">
              <label class="form-label fw-bold">Descrição da Entrada <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoReceberDescricao" required autofocus placeholder="Ex: Pagamento de orçamento #123 - Mesa de jantar">
            </div>

            <!-- Valor e Data de Vencimento -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Valor (R$) <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoReceberValor" required placeholder="R$ 0,00">
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Data de Vencimento/Recebimento <span class="text-danger">*</span></label>
              <input type="date" class="form-control" id="novoReceberDataVenc" required>
            </div>

            <!-- Cliente e Forma de Recebimento -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Cliente Relacionado <span class="text-danger">*</span></label>
              <select class="form-select" id="novoReceberCliente" required>
                <option value="">Selecione um cliente...</option>
                <!-- Preenchido dinamicamente -->
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Forma de Recebimento <span class="text-danger">*</span></label>
              <select class="form-select" id="novoReceberForma" required>
                <option value="">Selecione...</option>
                <option value="dinheiro">Dinheiro</option>
                <option value="cartao">Cartão de Crédito/Débito</option>
                <option value="boleto">Boleto</option>
                <option value="pix">PIX</option>
                <option value="transferencia">Transferência Bancária</option>
                <option value="cheque">Cheque</option>
                <option value="outro">Outro</option>
              </select>
            </div>

            <!-- Categoria e Status -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Categoria <span class="text-danger">*</span></label>
              <select class="form-select" id="novoReceberCategoria" required>
                <option value="">Selecione...</option>
                <option value="vendas">Vendas de Produtos</option>
                <option value="servicos">Serviços Prestados</option>
                <option value="reembolso">Reembolso/Devolução</option>
                <option value="investimento">Investimento/Empréstimo</option>
                <option value="outro">Outra</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Status Inicial <span class="text-danger">*</span></label>
              <select class="form-select" id="novoReceberStatus" required>
                <option value="pendente">Pendente</option>
                <option value="pago">Pago</option>
                <option value="atrasado">Atrasado</option>
                <option value="cancelado">Cancelado</option>
              </select>
            </div>

            <!-- Observações -->
            <div class="col-12">
              <label class="form-label">Observações</label>
              <textarea class="form-control" id="novoReceberObs" rows="3" placeholder="Detalhes adicionais, como comprovante ou condições..."></textarea>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-success" id="btnSalvarNovoReceber" data-save-section="financeiro" data-modal-id="modalNovoReceber">
          <i class="bi bi-check-lg me-2"></i>Adicionar Entrada
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Nova Conta a Pagar -->
<div class="modal fade" id="modalNovoPagar" tabindex="-1" aria-labelledby="modalNovoPagarLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="modalNovoPagarLabel"><i class="bi bi-arrow-up-circle me-2"></i>Nova Saída Financeira (Dívida/Despesa)</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="formNovoPagar">
          <div class="row g-3">
            <!-- Descrição -->
            <div class="col-12">
              <label class="form-label fw-bold">Descrição da Saída <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoPagarDescricao" required autofocus placeholder="Ex: Compra de MDF - Nota #456">
            </div>

            <!-- Valor e Data de Vencimento -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Valor (R$) <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="novoPagarValor" required placeholder="R$ 0,00">
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Data de Vencimento/Pagamento <span class="text-danger">*</span></label>
              <input type="date" class="form-control" id="novoPagarDataVenc" required>
            </div>

            <!-- Fornecedor e Forma de Pagamento -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Fornecedor Relacionado <span class="text-danger">*</span></label>
              <select class="form-select" id="novoPagarFornecedor" required>
                <option value="">Selecione um fornecedor...</option>
                <!-- Preenchido dinamicamente -->
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Forma de Pagamento <span class="text-danger">*</span></label>
              <select class="form-select" id="novoPagarForma" required>
                <option value="">Selecione...</option>
                <option value="dinheiro">Dinheiro</option>
                <option value="cartao">Cartão de Crédito/Débito</option>
                <option value="boleto">Boleto</option>
                <option value="pix">PIX</option>
                <option value="transferencia">Transferência Bancária</option>
                <option value="cheque">Cheque</option>
                <option value="outro">Outro</option>
              </select>
            </div>

            <!-- Categoria e Status -->
            <div class="col-md-6">
              <label class="form-label fw-bold">Categoria <span class="text-danger">*</span></label>
              <select class="form-select" id="novoPagarCategoria" required>
                <option value="">Selecione...</option>
                <option value="materiais">Compra de Materiais</option>
                <option value="salarios">Salários/Funcionários</option>
                <option value="aluguel">Aluguel/Contas Fixas</option>
                <option value="manutencao">Manutenção/Equipamentos</option>
                <option value="impostos">Impostos/Taxas</option>
                <option value="outro">Outra</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Status Inicial <span class="text-danger">*</span></label>
              <select class="form-select" id="novoPagarStatus" required>
                <option value="pendente">Pendente</option>
                <option value="pago">Pago</option>
                <option value="atrasado">Atrasado</option>
                <option value="cancelado">Cancelado</option>
              </select>
            </div>

            <!-- Observações -->
            <div class="col-12">
              <label class="form-label">Observações</label>
              <textarea class="form-control" id="novoPagarObs" rows="3" placeholder="Detalhes adicionais, como nota fiscal ou condições..."></textarea>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-danger" id="btnSalvarNovoPagar" data-save-section="financeiro" data-modal-id="modalNovoPagar">
          <i class="bi bi-check-lg me-2"></i>Adicionar Saída
        </button>
      </div>
    </div>
  </div>
</div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="script.js"></script>
</body>
</html>